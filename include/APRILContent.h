/// \file APRILContent.h
/*
 *
 * APRILContent.h header template automatically generated by a class generator
 * Creation date : ven. mars 20 2015
 *
 * This file is part of APRILContent libraries.
 * 
 * APRILContent is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * based upon these libraries are permitted. Any copy of these libraries
 * must include this copyright notice.
 * 
 * APRILContent is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with APRILContent.  If not, see <http://www.gnu.org/licenses/>.
 * 
 * @author Remi Ete
 * @copyright CNRS , IPNL
 */

#ifndef APRIL_CONTENT_H
#define APRIL_CONTENT_H 1

// multi-threading option
#ifdef APRIL_PARALLEL
#include <omp.h>
#endif

#include "Api/PandoraApi.h"
#include "Pandora/PandoraInternal.h"
#include "APRILApi/APRILContentApi.h"
#include "APRILApi/ObjectFactories.h"

#include "APRILCheating/CheatingTrackToClusterMatching.h"
#include "APRILCheating/PerfectParticleFlowAlgorithm.h"
#include "APRILCheating/PerfectClusteringAlgorithm.h"
#include "APRILCheating/PerfectClusteringAlgorithmNew.h"
#include "APRILCheating/PerfectHitCorrectionAlgorithm.h"
#include "APRILCheating/PerfectFragmentRemovalAlgorithm.h"
#include "APRILCheating/PerfectIsoHitRemovalAlgorithm.h"
#include "APRILCheating/PerfectNeutralHitRecoveryAlgorithm.h"
#include "APRILCheating/PerfectChargedHitRecoveryAlgorithm.h"
#include "APRILCheating/PerfectChargedClusterSeparationAlgorithm.h"
#include "APRILCheating/PerfectPfoCreationAlgorithm.h"
#include "APRILCheating/SimplePfoTestAlgorithm.h"
#include "APRILCheating/SemiPerfectPfoCreationAlgorithm.h"
#include "APRILCheating/CheatingClusterCleaningAlgorithm.h"
#include "APRILCheating/CheatingClusterMergingAlgorithm.h"
#include "APRILCheating/CheatingClusterMergingNewAlgorithm.h"
#include "APRILCheating/CheatingHitRecoveryAlgorithm.h"
#include "APRILCheating/CheatingParticleIDAlgorithm.h"

#include "APRILClustering/APRILClusteringAlgorithm.h"
#include "APRILClustering/ClusteringParentAlgorithm.h"
#include "APRILClustering/SimpleRegionClusteringAlgorithm.h"
#include "APRILClustering/IsoHitRemovalAlgorithm.h"
#include "APRILClustering/IsoHitClusteringAlgorithm.h"
#include "APRILClustering/FragmentsFromIsoHitsMergingAlgorithm.h"

#include "APRILHelpers/CaloHitHelper.h"
#include "APRILHelpers/CaloHitRangeSearchHelper.h"
#include "APRILHelpers/CaloHitNeighborSearchHelper.h"
#include "APRILHelpers/ClusterHelper.h"
#include "APRILHelpers/ClusterPropertiesHelper.h"
#include "APRILHelpers/GeometryHelper.h"
#include "APRILHelpers/ReclusterHelper.h"
#include "APRILHelpers/SortingHelper.h"
#include "APRILHelpers/BDTBasedClusterIdHelper.h"
#include "APRILHelpers/ClusterPropertiesFillingHelper.h"
#include "APRILHelpers/ClusterTrackEnergyFillingHelper.h"

#include "APRILMonitoring/VisualMonitoringAlgorithm.h"
#include "APRILMonitoring/PerformanceMonitoringAlgorithm.h"
#include "APRILMonitoring/SingleParticleMonitoringAlgorithm.h"

#include "APRILPfoConstruction/PfoCreationAlgorithm.h"

#include "APRILParticleId/FinalParticleIdAlgorithm.h"
#include "APRILParticleId/PhotonReconstructionAlgorithm.h"
#include "APRILParticleId/SingleClusterIdAlgorithm.h"

#include "APRILPlugins/APRILPseudoLayerPlugin.h"
#include "APRILPlugins/ParticleIdPlugins.h"
#include "APRILPlugins/ShowerProfilePlugin.h"

#include "APRILReclustering/EnergyExcessReclusteringAlgorithm.h"
#include "APRILReclustering/MissingEnergyReclusteringAlgorithm.h"
#include "APRILReclustering/SplitTrackReclusteringAlgorithm.h"
#include "APRILReclustering/ResolveTrackAssociationsAlg.h"
#include "APRILReclustering/ForcedClusteringAlgorithm.h"
#include "APRILReclustering/ForceSplitTrackAssociationsAlg.h"

#include "APRILTools/ConnectorCleaningTool.h"
#include "APRILTools/ConnectorSeedingTool.h"
#include "APRILTools/ConnectorPlusTool.h"
#include "APRILTools/NearbyHitsConnectingTool.h"
#include "APRILTools/ConnectorAlignmentTool.h"
#include "APRILTools/TrackDrivenSeedingTool.h"
#include "APRILTools/CaloHitMergingTool.h"

#include "APRILTopologicalAssociation/TopologicalAssociationParentAlgorithm.h"
#include "APRILTopologicalAssociation/PointingClusterAssociationAlgorithm.h"
#include "APRILTopologicalAssociation/PointingClusterAssociationNewAlgorithm.h"
#include "APRILTopologicalAssociation/ClustersMergingAlgorithm.h"
#include "APRILTopologicalAssociation/MatchTrackWithStartingClusterAlgorithm.h"
#include "APRILTopologicalAssociation/ClusterFromTrackMergingAlgorithm.h"
#include "APRILTopologicalAssociation/ClusterFromTrackMergingAlgorithm2.h"
#include "APRILTopologicalAssociation/ClusterFromTrackMergingAlgorithm3.h"
#include "APRILTopologicalAssociation/ChargedFragmentsMergingAlgorithm.h"
#include "APRILTopologicalAssociation/ChargedFragmentsMergingAlgorithm2.h"
#include "APRILTopologicalAssociation/ChargedFragmentsMergingAlgorithm3.h"
#include "APRILTopologicalAssociation/ClusterFromTrackMergingAlgorithm4.h"
#include "APRILTopologicalAssociation/ClusterFromTrackMergingAlgorithm5.h"
#include "APRILTopologicalAssociation/NeutralFragmentMergingAlgorithm.h"
#include "APRILTopologicalAssociation/NearbyFragmentsMergingAlgorithm.h"
#include "APRILTopologicalAssociation/ClosebySeedMergingAlgorithm.h"
#include "APRILTopologicalAssociation/ClusterFragmentMergingAlgorithm.h"
#include "APRILTopologicalAssociation/SurroundingHitsMergingAlgorithm.h"
#include "APRILTopologicalAssociation/NearbyTrackPhotonRemovalAlg.h"
#include "APRILTopologicalAssociation/MipFragmentMergingAlg.h"
#include "APRILTopologicalAssociation/FragmentRemovalAlgorithm.h"
#include "APRILTopologicalAssociation/FragmentsFindingAlgorithm.h"
#include "APRILTopologicalAssociation/PhotonCleanAlgorithm.h"
#include "APRILTopologicalAssociation/ConeBasedMergingAlgorithm.h"
#include "APRILTopologicalAssociation/MainFragmentRemovalAlgorithm.h"

#include "APRILTrackClusterAssociation/TrackClusterAssociationMVAAlgorithm.h"
#include "APRILTrackClusterAssociation/UnassociatedTrackRecoveryAlg.h"
#include "APRILTrackClusterAssociation/TrackClusterAssociationAlgorithm.h"
#include "APRILTrackClusterAssociation/LoopingTrackAssociationAlgorithm.h"
#include "APRILTrackClusterAssociation/TrackRecoveryAlgorithm.h"
#include "APRILTrackClusterAssociation/TrackRecoveryHelixAlgorithm.h"
#include "APRILTrackClusterAssociation/TrackRecoveryInteractionsAlgorithm.h"

#include "APRILUtility/AlgorithmConfiguration.h"
#include "APRILUtility/EventPreparationAlgorithm.h"
#include "APRILUtility/ClusterPreparationAlgorithm.h"
#include "APRILUtility/TrackPreparationAlgorithm.h"
#include "APRILUtility/ListChangingAlgorithm.h"
#include "APRILUtility/ListMergingAlgorithm.h"
#include "APRILUtility/CaloHitPreparationAlgorithm.h"
#include "APRILUtility/CaloHitTimingAlgorithm.h"
#include "APRILUtility/ClusterCheckAlgorithm.h"
#include "APRILUtility/ClusterPurityAlgorithm.h"
#include "APRILUtility/ClusterEfficiencyAlgorithm.h"
#include "APRILUtility/IsolatedHitClusteringAlgorithm.h"
#include "APRILUtility/LoadEMClusterAlgorithm.h"
#include "APRILUtility/NearbyHitRecoveryAlgorithm.h"

/** 
 * @brief  APRILContent class used to register april algorithms and plugins
 */ 
class APRILContent 
{
public:

#define APRIL_ALGORITHM_LIST(d) \
    d("APRILPerfectParticleFlow",                 april_content::PerfectParticleFlowAlgorithm::Factory) \
    d("APRILPerfectClustering",                   april_content::PerfectClusteringAlgorithm::Factory) \
    d("APRILPerfectClusteringNew",                april_content::PerfectClusteringAlgorithmNew::Factory) \
    d("APRILPerfectHitCorrection",                april_content::PerfectHitCorrectionAlgorithm::Factory) \
    d("APRILPerfectFragmentRemoval",              april_content::PerfectFragmentRemovalAlgorithm::Factory) \
    d("APRILPerfectIsoHitRemoval",                april_content::PerfectIsoHitRemovalAlgorithm::Factory) \
    d("APRILIsoHitRemoval",                       april_content::IsoHitRemovalAlgorithm::Factory) \
    d("APRILIsoHitClustering",                    april_content::IsoHitClusteringAlgorithm::Factory) \
    d("APRILFragmentsFromIsoHitsMerging",         april_content::FragmentsFromIsoHitsMergingAlgorithm::Factory) \
    d("APRILPerfectNeutralHitRecovery",           april_content::PerfectNeutralHitRecoveryAlgorithm::Factory) \
    d("APRILPerfectChargedHitRecovery",           april_content::PerfectChargedHitRecoveryAlgorithm::Factory) \
    d("APRILPerfectChargedClusterSeparation",     april_content::PerfectChargedClusterSeparationAlgorithm::Factory) \
    d("APRILPerfectPfoCreation",                  april_content::PerfectPfoCreationAlgorithm::Factory) \
    d("APRILSimplePfoTest",                       april_content::SimplePfoTestAlgorithm::Factory) \
    d("APRILSemiPerfectPfoCreation",              april_content::SemiPerfectPfoCreationAlgorithm::Factory) \
    d("APRILCheatingTrackToClusterMatching",      april_content::CheatingTrackToClusterMatching::Factory) \
    d("APRILClustering",                     april_content::APRILClusteringAlgorithm::Factory) \
    d("APRILCheatingClusterCleaning",             april_content::CheatingClusterCleaningAlgorithm::Factory) \
    d("APRILCheatingClusterMerging",              april_content::CheatingClusterMergingAlgorithm::Factory) \
    d("APRILCheatingClusterMergingNew",           april_content::CheatingClusterMergingNewAlgorithm::Factory) \
    d("APRILCheatingHitRecovery",                 april_content::CheatingHitRecoveryAlgorithm::Factory) \
    d("APRILCheatingParticleID",                  april_content::CheatingParticleIDAlgorithm::Factory) \
    d("APRILClusteringParent",                    april_content::ClusteringParentAlgorithm::Factory) \
    d("APRILSimpleRegionClustering",              april_content::SimpleRegionClusteringAlgorithm::Factory) \
    d("APRILVisualMonitoring",                    april_content::VisualMonitoringAlgorithm::Factory) \
    d("APRILPerformanceMonitoring",               april_content::PerformanceMonitoringAlgorithm::Factory) \
    d("APRILSingleParticleMonitoring",            april_content::SingleParticleMonitoringAlgorithm::Factory) \
    d("APRILFinalParticleId",                     april_content::FinalParticleIdAlgorithm::Factory) \
    d("APRILPhotonReconstruction",                april_content::PhotonReconstructionAlgorithm::Factory) \
    d("APRILSingleClusterId",                     april_content::SingleClusterIdAlgorithm::Factory) \
    d("APRILPfoCreation",                         april_content::PfoCreationAlgorithm::Factory) \
    d("APRILEnergyExcessReclustering",            april_content::EnergyExcessReclusteringAlgorithm::Factory) \
    d("APRILMissingEnergyReclustering",           april_content::MissingEnergyReclusteringAlgorithm::Factory) \
    d("APRILSplitTrackReclustering",              april_content::SplitTrackReclusteringAlgorithm::Factory) \
    d("APRILForceSplitTrackAssociations",         april_content::ForceSplitTrackAssociationsAlg::Factory) \
    d("APRILResolveTrackAssociations",            april_content::ResolveTrackAssociationsAlg::Factory) \
    d("APRILForcedClustering",                    april_content::ForcedClusteringAlgorithm::Factory) \
    d("APRILTopologicalAssociationParent",        april_content::TopologicalAssociationParentAlgorithm::Factory) \
    d("APRILPointingClusterAssociation",          april_content::PointingClusterAssociationAlgorithm::Factory) \
    d("APRILPointingClusterAssociationNew",       april_content::PointingClusterAssociationNewAlgorithm::Factory) \
    d("APRILClustersMerging",                     april_content::ClustersMergingAlgorithm::Factory) \
    d("APRILMatchTrackWithStartingCluster",       april_content::MatchTrackWithStartingClusterAlgorithm::Factory) \
    d("APRILClusterFromTrackMerging",             april_content::ClusterFromTrackMergingAlgorithm::Factory) \
    d("APRILClusterFromTrackMerging2",            april_content::ClusterFromTrackMergingAlgorithm2::Factory) \
    d("APRILClusterFromTrackMerging3",            april_content::ClusterFromTrackMergingAlgorithm3::Factory) \
    d("APRILChargedFragmentsMerging",             april_content::ChargedFragmentsMergingAlgorithm::Factory) \
    d("APRILChargedFragmentsMerging2",            april_content::ChargedFragmentsMergingAlgorithm2::Factory) \
    d("APRILChargedFragmentsMerging3",            april_content::ChargedFragmentsMergingAlgorithm3::Factory) \
    d("APRILClusterFromTrackMerging4",            april_content::ClusterFromTrackMergingAlgorithm4::Factory) \
    d("APRILClusterFromTrackMerging5",            april_content::ClusterFromTrackMergingAlgorithm5::Factory) \
    d("APRILNeutralFragmentMerging",              april_content::NeutralFragmentMergingAlgorithm::Factory) \
    d("APRILNearbyFragmentsMerging",              april_content::NearbyFragmentsMergingAlgorithm::Factory) \
    d("APRILClosebySeedMerging",                  april_content::ClosebySeedMergingAlgorithm::Factory) \
    d("APRILClusterFragmentMerging",              april_content::ClusterFragmentMergingAlgorithm::Factory) \
    d("APRILSurroundingHitsMerging",              april_content::SurroundingHitsMergingAlgorithm::Factory) \
    d("APRILNearbyTrackPhotonRemoval",            april_content::NearbyTrackPhotonRemovalAlg::Factory) \
    d("APRILMipFragmentMerging",                  april_content::MipFragmentMergingAlg::Factory) \
    d("APRILFragmentRemoval",                     april_content::FragmentRemovalAlgorithm::Factory) \
    d("APRILFragmentsFinding",                    april_content::FragmentsFindingAlgorithm::Factory) \
    d("APRILPhotonClean",                         april_content::PhotonCleanAlgorithm::Factory) \
    d("APRILConeBasedMerging",                    april_content::ConeBasedMergingAlgorithm::Factory) \
    d("APRILMainFragmentRemoval",                 april_content::MainFragmentRemovalAlgorithm::Factory) \
    d("APRILTrackClusterAssociationMVA",          april_content::TrackClusterAssociationMVAAlgorithm::Factory) \
    d("APRILUnassociatedTrackRecovery",           april_content::UnassociatedTrackRecoveryAlg::Factory) \
    d("APRILTrackClusterAssociation",             april_content::TrackClusterAssociationAlgorithm::Factory) \
    d("APRILLoopingTrackAssociation",             april_content::LoopingTrackAssociationAlgorithm::Factory) \
    d("APRILTrackRecovery",                       april_content::TrackRecoveryAlgorithm::Factory) \
    d("APRILTrackRecoveryHelix",                  april_content::TrackRecoveryHelixAlgorithm::Factory) \
    d("APRILTrackRecoveryInteractions",           april_content::TrackRecoveryInteractionsAlgorithm::Factory) \
    d("APRILEventPreparation",                    april_content::EventPreparationAlgorithm::Factory) \
    d("APRILClusterPreparation",                  april_content::ClusterPreparationAlgorithm::Factory) \
    d("APRILTrackPreparation",                    april_content::TrackPreparationAlgorithm::Factory) \
    d("APRILCaloHitListMerging",                  april_content::InputObjectListMergingAlgorithm<pandora::CaloHitList>::Factory) \
    d("APRILTrackListMerging",                    april_content::InputObjectListMergingAlgorithm<pandora::TrackList>::Factory) \
    d("APRILMCParticleListMerging",               april_content::InputObjectListMergingAlgorithm<pandora::MCParticleList>::Factory) \
    d("APRILPfoListMerging",                      april_content::AlgorithmObjectListMergingAlgorithm<pandora::ParticleFlowObject>::Factory) \
    d("APRILClusterListMerging",                  april_content::AlgorithmObjectListMergingAlgorithm<pandora::Cluster>::Factory) \
    d("APRILVertexListMerging",                   april_content::AlgorithmObjectListMergingAlgorithm<pandora::Vertex>::Factory) \
    d("APRILListChanging",                        april_content::ListChangingAlgorithm::Factory) \
    d("APRILAlgorithmConfiguration",              april_content::AlgorithmConfiguration::Factory) \
    d("APRILCaloHitPreparation",                  april_content::CaloHitPreparationAlgorithm::Factory) \
    d("APRILCaloHitTiming",                       april_content::CaloHitTimingAlgorithm::Factory) \
    d("APRILClusterCheck",                        april_content::ClusterCheckAlgorithm::Factory) \
    d("APRILClusterPurity",                       april_content::ClusterPurityAlgorithm::Factory) \
    d("APRILClusterEfficiency",                   april_content::ClusterEfficiencyAlgorithm::Factory) \
    d("APRILIsolatedHitClustering",               april_content::IsolatedHitClusteringAlgorithm::Factory) \
    d("APRILNearbyHitRecovery",                   april_content::NearbyHitRecoveryAlgorithm::Factory) \
    d("APRILLoadEMCluster",                       april_content::LoadEMClusterAlgorithm::Factory)


#define APRIL_ALGORITHM_TOOL_LIST(d) \
    d("APRILConnectorCleaning",                   april_content::ConnectorCleaningTool::Factory) \
    d("APRILConnectorSeeding",                    april_content::ConnectorSeedingTool::Factory) \
    d("APRILConnectorPlus",                       april_content::ConnectorPlusTool::Factory) \
    d("APRILNearbyHitsConnecting",                april_content::NearbyHitsConnectingTool::Factory) \
    d("APRILTrackDrivenSeeding",                  april_content::TrackDrivenSeedingTool::Factory) \
    d("APRILConnectorAlignment",                  april_content::ConnectorAlignmentTool::Factory) \
    d("APRILCaloHitMerging",                      april_content::CaloHitMergingTool::Factory)

#define APRIL_PARTICLE_ID_LIST(d) \
    d("APRILEmShowerId",                     april_content::APRILParticleIdPlugins::APRILEmShowerId) \
    d("APRILPhotonId",                       april_content::APRILParticleIdPlugins::APRILPhotonId) \
    d("APRILElectronId",                     april_content::APRILParticleIdPlugins::APRILElectronId) \
    d("APRILMuonId",                         april_content::APRILParticleIdPlugins::APRILMuonId)


  /**
   *  @brief  Register all the april algorithms with pandora
   *
   *  @param  pandora the pandora instance with which to register content
   */
  static pandora::StatusCode RegisterAlgorithms(const pandora::Pandora &pandora);

  /**
   *  @brief  Register pseudo layer plugin with pandora
   *
   *  @param  pandora the pandora instance with which to register content
   */
  static pandora::StatusCode RegisterAPRILPseudoLayerPlugin(const pandora::Pandora &pandora);
  static pandora::StatusCode RegisterAPRILShowerProfilePlugin(const pandora::Pandora &pandora);

  /**
   *  @brief  Register april particle id functions
   *
   *  @param  pandora the pandora instance with which to register content
   */
  static pandora::StatusCode RegisterParticleIds(const pandora::Pandora &pandora);
};

//------------------------------------------------------------------------------------------------------------------------------------------
//------------------------------------------------------------------------------------------------------------------------------------------

inline pandora::StatusCode APRILContent::RegisterAlgorithms(const pandora::Pandora &pandora)
{
  APRIL_ALGORITHM_LIST(PANDORA_REGISTER_ALGORITHM);
  APRIL_ALGORITHM_TOOL_LIST(PANDORA_REGISTER_ALGORITHM_TOOL);

  return pandora::STATUS_CODE_SUCCESS;
}

//------------------------------------------------------------------------------------------------------------------------------------------

inline pandora::StatusCode APRILContent::RegisterAPRILPseudoLayerPlugin(const pandora::Pandora &pandora)
{
  return PandoraApi::SetPseudoLayerPlugin(pandora, new april_content::APRILPseudoLayerPlugin());
}

inline pandora::StatusCode APRILContent::RegisterAPRILShowerProfilePlugin(const pandora::Pandora &pandora)
{
  return PandoraApi::SetShowerProfilePlugin(pandora, new april_content::APRILShowerProfilePlugin());
}

//------------------------------------------------------------------------------------------------------------------------------------------

pandora::StatusCode APRILContent::RegisterParticleIds(const pandora::Pandora &pandora)
{
  APRIL_PARTICLE_ID_LIST(PANDORA_REGISTER_PARTICLE_ID);

  return pandora::STATUS_CODE_SUCCESS;
}


#endif  //  APRIL_CONTENT_H
